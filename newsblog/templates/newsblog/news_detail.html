{% extends "base.html" %}
{% load static %}

{% block content %}

<!-- HERO SECTION -->
<section class="hero-section">
  <div class="overlay"></div>

  <div class="container position-relative z-1 pt-lg-3">
    <div class="row g-4 justify-content-center">
      <!-- ARTICLE CONTENT -->
      <div class="col-lg-8">
        <!-- ARTICLE CARD -->
        <div class="glass-card mb-4">
          <!-- ARTICLE IMAGE -->
          <img src="{% if post.featured_image.public_id != 'placeholder' %}{{ post.featured_image.url }}{% else %}{% static 'images/wkm_news_fallback.png' %}{% endif %}" alt="Article Image: {{ post.title }}" class="w-100 mb-4 news-detail-article-image">

          <!-- ARTICLE HEADER -->
          <h1 class="fw-bold mb-2">{{ post.title }}</h1>

          <div class="d-flex align-items-center gap-3 mb-4 pb-3 border-bottom">
            <small class="text-secondary">
              <strong>Published:</strong> {{ post.created_on|date:"F j, Y" }}
            </small>
            <small class="text-secondary">
              <strong>By:</strong> {{ post.author.first_name|default:post.author.username }}
            </small>
          </div>

          <!-- ARTICLE CONTENT -->
          <div class="article-content text-secondary mb-4">
            {{ post.content|safe }}
          </div>
        </div>

        <!-- NAVIGATION -->
        <div class="glass-card">
          <div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
            <a href="{% url 'news_list' %}" class="btn btn-outline-light">
              <span>‚Üê Back to News</span>
            </a>
            <div class="d-flex gap-2">
              {% if previous_post %}
              <a href="{% url 'news_detail' id=previous_post.id %}" class="btn btn-success">Previous Article</a>
              {% else %}
              <button class="btn btn-success" disabled>Previous Article</button>
              {% endif %}
              {% if next_post %}
              <a href="{% url 'news_detail' id=next_post.id %}" class="btn btn-success">Next Article</a>
              {% else %}
              <button class="btn btn-success" disabled>Next Article</button>
              {% endif %}
            </div>
          </div>
        </div>
      </div>

      <!-- SIDEBAR -->
      <div class="col-lg-4">
        <!-- RECENT ARTICLES -->
        <div class="glass-card mb-4">
          <h5 class="fw-bold mb-3">Recent Articles</h5>

          {% for recent_post in recent_posts %}
          <div class="mb-3 pb-3 {% if not forloop.last %}border-bottom{% endif %}">
            <a href="{% url 'news_detail' id=recent_post.id %}" class="text-decoration-none">
              <h6 class="mb-1 text-light">{{ recent_post.title }}</h6>
            </a>
            <small class="text-secondary">{{ recent_post.created_on|date:"F j, Y" }}</small>
          </div>
          {% endfor %}
        </div>

        <!-- ARTICLE INFO -->
        <div class="glass-card">
          <h5 class="fw-bold mb-3">Article Info</h5>
          <div class="mb-2">
            <small class="text-secondary"><strong>Author:</strong> {{ post.author.first_name|default:post.author.username }}</small>
          </div>
          <div class="mb-2">
            <small class="text-secondary"><strong>Published:</strong> {{ post.created_on|date:"F j, Y" }}</small>
          </div>
          <div>
            <small class="text-secondary"><strong>Updated:</strong> {{ post.updated_on|date:"F j, Y" }}</small>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

{% endblock %}

{% block copyright %}
Copyright 2023 by Lewis Kosztan
{% endblock copyright %}